<!DOCTYPE HTML>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js" xmlns:th="http://www.thymeleaf.org">
<!--<![endif]-->
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta name="description" content="Basheer Becerra's personal website." />
<meta name="keywords"
	content="Basheer, Becerra, Bash, developer, entrepreneur, researcher" />
<meta name="author" content="Basheer Becerra" />

<!-- Facebook and Twitter integration -->
<meta property="og:title" content="" />
<meta property="og:image" content="" />
<meta property="og:url" content="" />
<meta property="og:site_name" content="" />
<meta property="og:description" content="" />
<meta name="twitter:title" content="" />
<meta name="twitter:image" content="" />
<meta name="twitter:url" content="" />
<meta name="twitter:card" content="" />

<title>FlyCorr</title>

<!-- Google Fonts -->
<link
	href='https://fonts.googleapis.com/css?family=Open+Sans:400,300,700|Monsterrat:400,700|Merriweather:400,300italic,700'
	rel='stylesheet' type='text/css'></link>
<link
	href='https://cdnjs.cloudflare.com/ajax/libs/tether/1.4.0/css/tether.min.css'
	rel='stylesheet' type='text/css'></link>
<!-- Latest compiled and minified CSS -->
<link
	href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/css/bootstrap.min.css"
	rel="stylesheet"
	integrity="sha384-/Y6pD6FV/Vv2HJnA6t+vslU6fwYXjCFtcEpHbNJ0lyAFsXTsjBbfaDjzALeQsN6M"
	crossorigin="anonymous"></link>
<link rel="stylesheet"
	href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-switch/3.3.4/css/bootstrap2/bootstrap-switch.min.css"></link>
<link rel="stylesheet"
	href="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.css" />
<!-- Externalize CSS -->
<style>
body {
	background-color: #E4E4E4
}

.table-wrapper {
	width: 95% !important;
	margin: auto;
}

#query-comment {
	width: 100%;
	height: 200px;
}

.extra-space {
	margin-top: 25px;
}

.query-inputs {
	width: 100% !important;
	margin: auto;
}

/* TODO: Quick Workaround to differentiate between main panels, and expression stage panels. Make more organized */
.panel-header {
	height: 10em;
}

/* For Plotlyjs CSS */
div[id*="-graph"] {
	width: 100%;
}
</style>
<style>
.card {
	border-radius: 0;
	transition: box-shadow 0.5s;
}

.card-body {
	background-color: #fff !important;
}

.card-header {
	color: #fff !important;
	background-color: #5C0075 !important;
	padding: 25px;
	border-bottom: 1px solid transparent;
	border-top-left-radius: 0px;
	border-top-right-radius: 0px;
	border-bottom-left-radius: 0px;
	border-bottom-right-radius: 0px;
}

.form-card {
	
}

.form-card-header {
	background-color: #fff !important;
}

.row {
	margin-top: 5px;
	margin-bottom: 5px;
}
</style>

<style th:inline="text">
td.details-control {
	background: url([[@{/images/details_open.png}]]) no-repeat center center;
	cursor: pointer;
}

tr.shown td.details-control {
	background: url([[@{/images/details_close.png}]]) no-repeat center
		center;
}
</style>
<style>
/* Style the accordion checkboxes */
.sub-checkbox-div {
	padding-left: 50px !important;
}
</style>
<style>
/* For jQuery UI slider */
div[id*="custom-handle"] {
	width: 3em !important;
	height: 1.6em !important;
	top: 50% !important;
	margin-top: -.8em;
	text-align: center;
	line-height: 1.6em;
}

div[id*="slider"] .ui-slider-range {
	background: #5C0075 !important;
}

div[id*="slider"] .ui-slider-handle {
	border-color: #5C0075 !important;
}

/* For required astrick, add to external css */
.form-group.required .control-label:after {
	content: "*";
	color: red;
}

/*For navbar */
nav {
	background-color: #E4E4E4 !important;
}
</style>

</head>
<body>
	<div th:include="fragments :: navbar"></div>
	<div class="container-fluid">
		<div class="row">
			<div class="col-md-12">
				<div th:include="fragments :: exception"></div>
			</div>
		</div>
		<div class="row">
			<div class="col-md-12">
				<div th:include="fragments :: gene-form"></div>
			</div>
		</div>
	</div>

	<div id="slider">
		<div id="custom-handle" class="ui-slider-handle"></div>
	</div>


	<!-- SCRIPTS -->
	<script src="https://code.jquery.com/jquery-3.2.1.min.js"
		integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
		crossorigin="anonymous"></script>
	<!-- Latest compiled and minified JavaScript -->
	<!-- TODO: May not need Tether.js for bootstrap 4-beta -->
	<script
		src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.4.0/js/tether.min.js"
		integrity="sha384-DztdAPBWPRXSA/3eYEEUWrWCy7G5KFbe8fFjk5JAIxUYHKkDx6Qin1DkWx51bBrb"
		crossorigin="anonymous"></script>
	<script
		src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js"
		integrity="sha384-b/U6ypiBEHpOf/4+1nzFpr53nxSS+GLCkfwBdFNTxtclqqenISfwAzpKaMNFNmj4"
		crossorigin="anonymous"></script>
	<script
		src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/js/bootstrap.min.js"
		integrity="sha384-h0AbiXch4ZDo7tp9hKZ4TsHbi047NrKGLO3SEJAg45jXxnGIfYzk4Si90RDIqNm1"
		crossorigin="anonymous"></script>
	<script
		src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-switch/3.3.4/js/bootstrap-switch.min.js">
		
	</script>
	<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"
		integrity="sha256-VazP97ZCwtekAsvgPBSUwPFKdrwD3unUfSGVYrahUqU="
		crossorigin="anonymous"></script>
	<div th:include="fragments :: form-expression-stage-checkbox-selection"></div>
	<script>
		$(function() {
			$('[data-toggle="tooltip"]').tooltip()
		})
	</script>

	<script th:inline="javascript">
		var DEFAULT_VALUE = 100;
		/*<![CDATA[*/
		var geneResultCount = /*[[${geneForm.geneResultCount}]]*/-1;

		geneResultCount = (geneResultCount == null ? DEFAULT_VALUE
				: geneResultCount);

		/*]]>*/

		$(function() {
			var handle = $("#custom-handle");

			var createEvent = function(sliderElement) {
				/*
				 * If input = default (meaning the form is fresh)
				 * Do the initial createSlider event
				 */
				$("#slider").slider("option", "value", geneResultCount); // Value set to default TODO: must be in sync with input box
				handle.text(geneResultCount); // Set default value to handle
			};

			var slideEvent = function(value) {
				handle.text(value);

				var value = $("#slider").slider("option", "value");
				$('#result-count').val(value);
			};

			var changeEvent = function() {
				var value = $("#slider").slider("option", "value");
				$('#result-count').val(value);
			};

			$("#slider").slider({
				orientation : "horizontal",
				range: "min",
				create : function() {
					createEvent(this)
				},
				slide : function(event, ui) {
					slideEvent(ui.value);
				},
				change : function(event, ui) {
					changeEvent();
				}
			});
			$("#slider").slider("option", "min", 2); // Min for correlation to work
			$("#slider").slider("option", "max", 500); // Max genes recommended (may be overrided by input number box)

			$('#result-count').on('change', function() {
				var val = $('#result-count').val();
				$("#slider").slider("option", "value", val);
				slideEvent(val);
			});
		});
	</script>
	<script th:inline="javascript">
		/* for custom data sliders */
		/*<![CDATA[*/
		var expressionStageOptions = /*[[${expressionStageOptions}]]*/[];
		/*]]>*/
		var DEFAULT_CUSTOM_DATA = 0;

		expressionStageOptions.expressionStageGroupList.forEach(function(
				expressionStageGroup) {
			expressionStageGroup.expressionStageList.forEach(function(
					expressionStage) {
				$(function() {
					var sliderObject = $("#" + expressionStageGroup.groupId
							+ '-' + expressionStage.expressionStageId
							+ "-slider");
					var handleObject = $("#" + expressionStageGroup.groupId
							+ '-' + expressionStage.expressionStageId
							+ "-custom-handle");
					var inputObject = $("#" + expressionStageGroup.groupId
							+ '-' + expressionStage.expressionStageId
							+ "-custom-input");

					var createEvent = function(sliderElement) {
						/*
						 * If input = default (meaning the form is fresh)
						 * Do the initial createSlider event
						 */
						sliderObject.slider("option", "value",
								DEFAULT_CUSTOM_DATA); // Value set to default TODO: must be in sync with input box
						handleObject.text(DEFAULT_CUSTOM_DATA); // Set default value to handle
					};

					var slideEvent = function(value) {
						handleObject.text(value);

						var value = sliderObject.slider("option", "value");
						inputObject.val(value);
						programmaticallyChangeSubCheckbox(sliderObject.parent().parent().find("input[type='checkbox']:checkbox"), "-custom-data-", true);
					};

					var changeEvent = function() {
						var value = sliderObject.slider("option", "value");
						inputObject.val(value);
					};

					sliderObject.slider({
						orientation : "horizontal",
						range: "min",
						create : function() {
							createEvent(this)
						},
						slide : function(event, ui) {
							slideEvent(ui.value);
						},
						change : function(event, ui) {
							changeEvent();
						}
					});
					sliderObject.slider("option", "min", 0);
					sliderObject.slider("option", "max", 1);
					// MAKE SURE STEP IS SAME AS NUMBER INPUT ELEMENT
					sliderObject.slider("option", "step", 0.01); 

					inputObject.on('change', function() {
						var val = inputObject.val();
						sliderObject.slider("option", "value", val);
						slideEvent(val);
					});
				});
			});
		});
	</script>
	<script>
	/*
	 * Custom Data Checkbox custom logic
	 */
	$("input[type='checkbox'][class*='custom-data']:checkbox").prop('checked', false);
	</script>
</body>
</html>